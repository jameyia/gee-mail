<!DOCTYPE html>
<html>
	<head>
		<title>Gee Mail - The world's newest snail mail</title>
		<meta charset="utf-8" />
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen" />
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
        
        

        // INITIAL JAVASCRIPT CODE

        var totalEmails = window.geemails.length;
        var totalUnreadEmails = totalEmails;

        var emailDate;

        document.getElementById("inbox").innerHTML = "INBOX (" + totalEmails +")";

       	//Load Initial Emails

       	var i = 0;

       	for(i = 0; i < totalEmails; i++)
       	{
       		// Construct Email
       		var newSender = document.createTextNode(window.geemails[i].sender);
       		var newSubject = document.createTextNode(window.geemails[i].subject);
       		var newDate = document.createTextNode(window.geemails[i].date.toDateString());
       		
       		var newBody = document.createTextNode(window.geemails[i].body);

       		var newEmail = document.createElement("DIV");
       		newEmail.classList.add("email", "unread");
       		newEmail.id = "email-" + i;

       		var infoList = document.createElement("UL");
       		infoList.classList.add("info");

       		// Date
       		var infoListItem = document.createElement("LI");
       		infoListItem.classList.add("date");
       		infoListItem.appendChild(newDate);

       		infoList.appendChild(infoListItem);

       		// Sender
 			infoListItem = document.createElement("LI");
 			infoListItem.classList.add("sender");  
 			infoListItem.appendChild(newSender);

 			infoList.appendChild(infoListItem);

 			// Subject
 			infoListItem = document.createElement("LI");
 			infoListItem.classList.add("subject");  
 			infoListItem.appendChild(newSubject);

 			infoList.appendChild(infoListItem);
 			// Put info list into email
 			newEmail.appendChild(infoList);

 			//Body
 			bodyItem = document.createElement("DIV");
 			bodyItem.classList.add("body");

 			bodyParagraph = document.createElement("P");
 			bodyParagraph.appendChild(newBody);

 			bodyItem.appendChild(bodyParagraph);

 			newEmail.appendChild(bodyItem);



 			var emailList = document.getElementsByClassName("emails")[0];

 			emailList.insertBefore(newEmail, emailList.childNodes[0]);





       		// Insert Email


       	}

        // RECURRING JAVASCRIPT CODE

      }

      function toggleEmail(emailID)
        {
        	
        	var currentEmailBody = document.querySelectorAll("#email-" + emailID + " .body")[0];

        	if(currentEmailBody.style.display != "block")
        	{
        		currentEmailBody.style.display = "block";

        		if(document.getElementById("email-" + emailID).classList.contains("unread"))
        		{
        			document.getElementById("email-" + emailID).classList.remove("unread");
        			document.getElementById("email-" + emailID).classList.add("read");

        			//totalUnreadEmails--;
        		}
        	}

        	else
        	{
        		document.getElementById("test").innerHTML = currentEmailBody.style.display;
        		currentEmailBody.style.display = "none";


        	}
        	
        }

    </script>
	</head>
	<body>
		<header>
		<h1><span id="gee-mail">Gee Mail</span></h1>
		<h2>Because <span id="fe-mail">Fe-Mail</span> and <span id="he-mail">He-Mail</span> just didn't get the whole market share</h2>
		</header>

		<nav>
			<ul>
				<!-- ADD INBOX COUNTER -->
				<li><a href="index.html" id="inbox">INBOX ()</a></li><!--
				--><li><a href="index.html">JUNK</a></li><!--
				--><li><a href="index.html">SENT</a></li><!--
				--><li><a href="index.html">TRASH</a></li><!--
			--></ul>
		</nav>

		<main id="main">
			<div class="legend">
				<ul>
					<li>Date</li><!--
					--><li>Sender</li><!--
					--><li>Subject</li>
				</ul>
			</div>

			<div class="emails">

				<!--
				<div class="email unread" id="email-1">
					<ul class="info" onclick="toggleEmail(1)">
						<li class="date">Sample Date</li>
						<li class="sender">Sample Sender</li>
						<li class="subject">Sample Subject</li>
					</ul>
					<div class="body">
						<p>Sample Body blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah</p> 
					</div>
				</div>
				<div class="email read" id="email-0">
					<ul class="info" onclick="toggleEmail(0)">
						<li class="date">Sample Date</li>
						<li class="sender">Sample Sender</li>
						<li class="subject">Sample Subject</li>
					</ul>
					<div class="body">
						<p>Sample Body blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah</p> 
					</div>
				</div>

				-->

			</div>

		</main>

		<footer>
			<small>Designed by Jameyia Shamia in a garage</small>
		</footer>

		<p id="test">date</p>
	</body>
</html>